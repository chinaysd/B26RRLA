C51 COMPILER V9.59.0.0   FUNCTION                                                          04/23/2019 19:12:17 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE FUNCTION
OBJECT MODULE PLACED IN .\obj\function.obj
COMPILER INVOKED BY: E:\MDK\C51\BIN\C51.EXE C\function.c OPTIMIZE(2,SPEED) BROWSE INCDIR(.\H;.\lib) DEBUG OBJECTEXTEND P
                    -RINT(.\lst\function.lst) TABS(7) OBJECT(.\obj\function.obj)

line level    source

   1          #include "function.h"
   2          
   3          #define HEAT_ENABLE    1
   4          #define HEAT_DISABLE   0
   5          
   6          #define MASS_ENABLE     1
   7          #define MASS_DISBALE    0
   8          
   9          #define CUP_FULL_ENABLE 1
  10          #define CUP_FULL_DISABLE 0
  11          
  12          
  13          static unsigned char MOTRO_FLAG;
  14          
  15          extern unsigned char count_level;
  16          extern unsigned char lock;
  17          extern unsigned char TX_DATA;
  18          extern unsigned int TX1_DATA;
  19          
  20          
  21          unsigned long int MyKey_Buf_Data;
  22          
  23          unsigned char key_press,
  24                              up_flag,
  25                              down_flag,
  26                              heat_red_flag,
  27                              auto_close_heat,
  28                              auto_close_mass,
  29                              rev_flag;
  30                              
  31          unsigned int motro_count0,
  32                            motro_count1,
  33                            auto_close_heat_cnt,
  34                            auto_close_mass_cnt,
  35                            u16TimeLock;
  36          
  37          
  38          void Foot_Led_Cmd(void)   //脚灯指令
  39          {
  40   1             if(count_level == 15)
  41   1             {
  42   2               count_level = 100;
  43   2                TX_DATA = LedOpenData;    //往下发的指令
  44   2                TX1_DATA = ExtiLedOpenData;
  45   2             }
  46   1             else if(count_level == 100)
  47   1             {
  48   2               count_level = 15; 
  49   2                TX_DATA = LedCloseData;    //往下发的指令
  50   2                TX1_DATA = ExtiLedCloseData;
  51   2             }
  52   1      }
  53          
  54          void Cup_Open_Cmd(void)          //杯子升降指令
C51 COMPILER V9.59.0.0   FUNCTION                                                          04/23/2019 19:12:17 PAGE 2   

  55          {
  56   1             if(MOTRO_FLAG == 0)
  57   1             {
  58   2               MOTRO_FLAG = 1;
  59   2               P0 &= 0Xf9;
  60   2               P0 |= 1 << 1;
  61   2               motro_count0 = 0;
  62   2               motro_count1 = 0;
  63   2               up_flag = 1;
  64   2               down_flag = 0;
  65   2             }
  66   1             else
  67   1             {
  68   2               MOTRO_FLAG = 0;
  69   2               P0 &= 0Xf9;
  70   2               P0 |= 1 << 2;
  71   2               motro_count0 = 0;
  72   2               motro_count1 = 0;
  73   2               up_flag = 0;
  74   2               down_flag = 1;
  75   2             }
  76   1      }
  77          
  78          void PushB_Open_Cmd(void)    //推杆B打开指令
  79          {
  80   1             TX_DATA = HeadUpData;
  81   1      }
  82          
  83          void PushB_Close_Cmd(void)        //推杆B收回指令
  84          {
  85   1             TX_DATA = HeadDownData;
  86   1      }
  87          
  88          void PushA_Close_Cmd(void)       //推杆A收回指令
  89          {
  90   1             TX_DATA = CloseData;
  91   1      }
  92          
  93          void PushA_Open_Cmd(void)                //推杆A打开指令
  94          {
  95   1             TX_DATA = OpenData;
  96   1      }
  97          
  98          void PushC_Open_Cmd(void)              //推杆C打开指令
  99          {
 100   1             TX_DATA = LumbarOpenData;
 101   1      }
 102          
 103          void PushC_Close_Cmd(void)            //推杆C收回指令
 104          {
 105   1             TX_DATA = LumbarCloseData;
 106   1      }
 107          
 108          void Push_Reset_Cmd(void)              //推杆复位指令
 109          {
 110   1             TX_DATA = HomeData;
 111   1      }
 112          
 113          #if 0
              
              #if HEAT_DISABLE
              void Heat_Status(void)       //发热布状态指令
C51 COMPILER V9.59.0.0   FUNCTION                                                          04/23/2019 19:12:17 PAGE 3   

              {
                     if(heat_red_flag == 0)
                     {
                       heat_red_flag = 1;
                       IO_RED_LIGHT_ON;
                       auto_close_heat = 1;
                       auto_close_heat_cnt = 0;
                     }
                     else
                     {
                       heat_red_flag = 0;
                       IO_RED_LIGHT_OFF;
                       auto_close_heat = 0;
                       auto_close_heat_cnt = 0;
                     }
                     TX_DATA = 0x20;
              }
              #endif
              
              #if MASS_ENABLE
              void Mass_Status(void)                //马达工作状态
              {
                     #if 0
                     rev_flag = ~rev_flag;
                     if(rev_flag)
                     {
                        auto_close_mass = 1;
                        auto_close_mass_cnt = 0;
                     }
                     else
                     {
                        auto_close_mass = 0;
                        auto_close_mass_cnt = 0;
                     }
                     #endif
                     TX_DATA = 0x21;
              }
              #endif
              
              #endif
 157          
 158          
 159          
 160          
 161          
 162          
 163          
 164          
 165          
 166          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    138    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
